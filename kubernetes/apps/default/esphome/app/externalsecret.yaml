---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: esphome
spec:
  refreshInterval: 5m
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: esphome-secret
    template:
      data:
        secrets.yaml: |-
          wifi_ssid: "{{ .ESPHOME_WIFI_SSID }}"
          wifi_password: "{{ .ESPHOME_WIFI_PASSWORD }}"
          hotspot_wifi_password: "{{ .ESPHOME_HOTSPOT_WIFI_PASSWORD }}"
          api_encryption_key: "{{ .ESPHOME_ENCRYPTION_KEY }}"
          ota_password: "{{ .ESPHOME_OTA_PASSWORD }}"
          domain_devices: .internal
  dataFrom:
    - extract:
        key: esphome
# ---
# # yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1.json
# apiVersion: external-secrets.io/v1
# kind: ExternalSecret
# metadata:
#   name: esphome-deploykey
# spec:
#   refreshInterval: 5m
#   secretStoreRef:
#     kind: ClusterSecretStore
#     name: onepassword
#   target:
#     name: esphome-deploykey
#     creationPolicy: Owner
#   data:
#     - secretKey: id_ed25519
#       remoteRef:
#         key: esphome
#         property: github_deploy_key


wifissid: "F9 (NoT)"
wifipass: mwasGdQ!J5z$8e
apipass: A22d21df
otapass: A22d21df

# New
wifi_ssid: "F9 (NoT)"
wifi_password: mwasGdQ!J5z$8e
hotspot_wifi_password: A22d21df