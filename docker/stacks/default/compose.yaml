services:
  isponsorblocktv:
    container_name: "isponsorblocktv"
    environment:
      TZ: "Europe/London"
    image: "dmunozv04/isponsorblocktv:v2.6.0"
    network_mode: "host"
    restart: always
    volumes:
      - "/mnt/apps-pool/appdata/isponsorblocktv:/app/data"

  minidlna:
    container_name: "minidlna"
    environment:
      MINIDLNA_MEDIA_DIR: "/media"
      TZ: "Europe/London"
    hostname: "F9-NAS"
    image: "vladgh/minidlna:1.3.6"
    network_mode: "host"
    restart: always
    volumes:
      - "/mnt/F9/FilmTV:/media"

  cups:
    container_name: "cups"
    devices:
      - "/dev/bus/usb/001/003:/dev/bus/usb/001/003"
    environment:
      TZ: "Europe/London"
    image: "ydkn/cups@sha256:76eb4fcc9bfce7573787938d9257cfced5dd21064559eae4ce112aa6a9d13ac2"
    network_mode: "bridge"
    ports:
      - "631:631/tcp"
    restart: "always"
    volumes:
      - "/mnt/apps-pool/appdata/cups:/etc/cups"
      - "/var/run/dbus:/var/run/dbus"

  node-exporter:
    container_name: "node-exporter"
    command:
      - '--path.rootfs=/host/root'
      - '--path.procfs=/host/proc'
      - '--path.sysfs=/host/sys'
      - '--path.udev.data=/host/root/run/udev/data'
      - '--web.listen-address=0.0.0.0:9100'
      - >-
        --collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)
    image: quay.io/prometheus/node-exporter:v1.9.1
    network_mode: host
    ports:
      - '9100:9100'
    restart: always
    volumes:
      - /:/host/root:ro
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro

  smartctl-exporter:
    container_name: "smartctl-exporter"
    image: quay.io/prometheuscommunity/smartctl-exporter:v0.14.0
    ports:
      - '9633:9633'
    privileged: True
    restart: always
    user: root

  ser2net:
    container_name: ser2net
    image: ghcr.io/jippi/docker-ser2net
    restart: always
    network_mode: host
    volumes:
      - /mnt/apps-pool/appdata/ser2net/ser2net.yaml:/etc/ser2net/ser2net.yaml
    devices:
      - /dev/ttyACM0

  proxmox-backup-server:
    container_name: "proxmox-backup-server"
    environment:
      TZ: "Europe/London"
    image: "ayufan/proxmox-backup-server:v4.0.13"
    network_mode: "host"
    restart: always
    deploy:
      resources:
        limits:
          memory: 2g
    tmpfs:
      - /run
    volumes:
      - "/mnt/Data/PBS:/backups"
      - "/mnt/apps-pool/appdata/pbs/etc:/etc/proxmox-backup"
      - "/mnt/apps-pool/appdata/pbs/lib:/var/lib/proxmox-backup"
      - "/mnt/apps-pool/appdata/pbs/logs:/var/log/proxmox-backup"

  webtop:
    image: lscr.io/linuxserver/webtop:debian-xfce@sha256:217676d397ab92559a56fab6c2e5ecf29d53a5bb438b8edaf29d7fea2aa7532a
    container_name: webtop
    security_opt:
      - seccomp:unconfined #optional
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
      - TITLE=F9 Remote
      - DRINODE=/dev/dri/renderD128
    devices:
      - "/dev/dri:/dev/dri"
    volumes:
      - /mnt/apps-pool/appdata/webtop/config:/config
      - ./webtop:/custom-cont-init.d:ro
    ports:
      - 3000:3000
      - 3001:3001
    shm_size: "1gb" #optional
    restart: always